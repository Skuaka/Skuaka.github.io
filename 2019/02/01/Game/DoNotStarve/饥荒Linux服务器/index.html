<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <meta http-equiv="”Cache-Control”" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <title>饥荒Linux服务器搭建 | Skuaka</title>
  <link rel="icon" type="image/png" sizes="32x32" href>
  



<link rel="stylesheet" href="/./vendor.ec1199.css"><link rel="stylesheet" href="/./app.5ed5af.css">


</head>
  <body>
    <header class="main-header">
  <div class="container">
    <a href="/" " class="logo">
      <img src="logo.jpg" alt="Skuaka" class="logo-img">
    </a>
    <span class="nav-separator"></span>
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索文章"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
    <a href="javascript:void(0);" class="nav-icon">
      <i class="fas fa-bars"></i>
    </a>
    <nav class="main-nav">
      <ul class="nav-list">
        
          <li class="nav-link ">
            <a href="/">首页</a>
          </li>
        
          <li class="nav-link ">
            <a href="/archives/">归档</a>
          </li>
        
          <li class="nav-link ">
            <a href="/categories">分类</a>
          </li>
        
          <li class="nav-link ">
            <a href="/about.html">关于</a>
          </li>
        
      </ul>
    </nav>
  </div>
</header>
    <div class="page--article">
  
    <div class="toc-container">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#饥荒Linux服务器搭建"><span class="toc-number">1.</span> <span class="toc-text">饥荒Linux服务器搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置"><span class="toc-number">1.2.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#配置文件树"><span class="toc-number">1.2.1.</span> <span class="toc-text">配置文件树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#token-文件（必须）"><span class="toc-number">1.2.2.</span> <span class="toc-text">token 文件（必须）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#世界地图（必须）"><span class="toc-number">1.2.3.</span> <span class="toc-text">世界地图（必须）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通用配置文件（必须）"><span class="toc-number">1.2.4.</span> <span class="toc-text">通用配置文件（必须）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#独立配置文件（必须）"><span class="toc-number">1.2.5.</span> <span class="toc-text">独立配置文件（必须）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#下载-Mod-文件（建议）"><span class="toc-number">1.2.6.</span> <span class="toc-text">下载 Mod 文件（建议）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置-Mod-文件（建议）"><span class="toc-number">1.2.7.</span> <span class="toc-text">配置 Mod 文件（建议）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设定管理员（可选）"><span class="toc-number">1.2.8.</span> <span class="toc-text">设定管理员（可选）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#黑名单（可选）"><span class="toc-number">1.2.9.</span> <span class="toc-text">黑名单（可选）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#白名单（可选）"><span class="toc-number">1.2.10.</span> <span class="toc-text">白名单（可选）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运行"><span class="toc-number">1.3.</span> <span class="toc-text">运行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#启动"><span class="toc-number">1.3.1.</span> <span class="toc-text">启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#更多命令"><span class="toc-number">1.3.2.</span> <span class="toc-text">更多命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结束"><span class="toc-number">2.</span> <span class="toc-text">结束</span></a></li></ol>
      <div class="toc-tip">Table of Contents ▼</div>
    </div>
  


  <div class="container">
    <article>
      <h1>饥荒Linux服务器搭建</h1>
      <h2 id="饥荒Linux服务器搭建"><a href="#饥荒Linux服务器搭建" class="headerlink" title="饥荒Linux服务器搭建"></a>饥荒Linux服务器搭建</h2><p>学习自：<a href="http://blog.ttionya.com/article-1233.html" target="_blank" rel="noopener">http://blog.ttionya.com/article-1233.html</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol>
<li><p>依旧为某些喜欢查看英文文档的人提供官方地址</p>
<p>由 V 社提供的 <code>SteamCMD</code> 使用方法的 Wiki 网址，<a href="https://developer.valvesoftware.com/wiki/SteamCMD" target="_blank" rel="noopener">点此进入</a></p>
<p>由 Klei 提供的 <code>Don&#39;t Strave Together Dedicated Server</code> 搭建教程，<a href="http://dont-starve-game.wikia.com/wiki/Guides/Don%E2%80%99t_Starve_Together_Dedicated_Servers" target="_blank" rel="noopener">点此进入</a></p>
<p>由 Klei 建议的 <code>Don&#39;t Strave Together Dedicated Server</code> 搭建指南，<a href="http://steamcommunity.com/sharedfiles/filedetails/?id=590565473" target="_blank" rel="noopener">点此进入</a>。指南中提供了在 Debian 系发行版上的安装方法，遇到问题可以去看</p>
</li>
<li><p>安装 Don’t Strave Together Dedicated Server</p>
<p>用 root 用户登陆</p>
<p>安装系统环境，以下内容由官方提供：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Ubuntu/Debian 64-Bit</span><br><span class="line">sudo apt-get install lib32gcc1 screen</span><br><span class="line">RedHat/CentOS 32-Bit</span><br><span class="line">yum -y install glibc libstdc++ screen libcurl</span><br><span class="line">RedHat/CentOS 64-Bit</span><br><span class="line">yum -y install glibc.i686 libstdc++.i686 screen libcurl.i686</span><br></pre></td></tr></table></figure>
<p>新建用户，非常不建议使用 root 运行游戏，这将产生严重的安全隐患：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -m dst</span><br><span class="line">su - dst</span><br></pre></td></tr></table></figure>
<p>开始下载并解压安装，默认目录选用户 <code>home</code> 目录。注意第 5 行，通过 <code>force_install_dir</code> 指定了 DST 的安装路径，这里取 <code>~/dst</code> 作为安装目录，若有需要可自行更改，不指定则默认安装至 <code>~/Steam/steamapps/common/Don&#39;t Starve Together Dedicated Server</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/steamcmd</span><br><span class="line">cd ~/steamcmd</span><br><span class="line">wget https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz</span><br><span class="line">tar -xvzf steamcmd_linux.tar.gz</span><br><span class="line">./steamcmd.sh +login anonymous +force_install_dir ~/dst +app_update 343050 validate +quit</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行 Don’t Strave Together Dedicated Server</p>
<p>先处理依赖，从而保证一次运行成功：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~/dst/bin</span><br><span class="line">ldd dontstarve_dedicated_server_nullrenderer</span><br><span class="line">./dontstarve_dedicated_server_nullrenderer</span><br><span class="line">#查看是否有错误信息，此时服务器不需要start</span><br></pre></td></tr></table></figure>
<p>一般会有以下报错信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.15&apos; not found</span><br><span class="line">#一般是因为安装的C运行库版本过低导致的，比如说CentOS从YUM源中安装的仅支持GLIBCXX到3.4.13</span><br><span class="line">#所幸SteamCMD中也需要该动态链接库，并且自带了该动态链接库，只需要拷贝至DST文件夹中即可</span><br><span class="line">cp ~/steamcmd/linux32/libstdc++.so.6 ~/dst/bin/lib32/</span><br><span class="line"> </span><br><span class="line">/lib/libc.so.6: version `GLIBC_2.15&apos; not found</span><br><span class="line">#一般是因为安装的glibc版本过低导致的，比如说CentOS从YUM源中安装的仅有2.12版本</span><br><span class="line">#从Klei官方提供的链接下载与glibc相关的3个文件，Debian系也是这样解决</span><br><span class="line">cd ~/dst/bin/lib32/</span><br><span class="line">wget https://github.com/dgibbs64/linuxgameservers/raw/master/Insurgency/dependencies/libc.so.6</span><br><span class="line">wget https://github.com/dgibbs64/linuxgameservers/raw/master/Insurgency/dependencies/libpthread.so.0</span><br><span class="line">wget https://github.com/dgibbs64/linuxgameservers/raw/master/Insurgency/dependencies/librt.so.1</span><br><span class="line"> </span><br><span class="line">error while loading shared libraries: libcurl-gnutls.so.4: cannot open shared object file: No such file or directory</span><br><span class="line">#这是因为系统没有搜索到该文件</span><br><span class="line">#Debian系</span><br><span class="line">sudo apt-get install libcurl4-gnutls-dev:i386</span><br><span class="line">$sudo apt-get install libstdc++6 </span><br><span class="line">$sudo apt-get install lib32stdc++6</span><br><span class="line">#RedHat系</span><br><span class="line">cp /usr/lib/libcurl.so.4 ~/dst/bin/lib32/libcurl-gnutls.so.4</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建脚本文件</p>
<p>解决完成全部报错后，创建两个脚本文件，作用是生成配置文件，配置文件的目录默认位于 <code>~/.klei/</code>。注意第二第三行，相关可用命令在文章末尾。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd ~/dst/bin/</span><br><span class="line">echo ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Master &gt; dst_overworld.sh</span><br><span class="line">echo ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Caves &gt; dst_caves.sh</span><br><span class="line">sh dst_overworld.sh</span><br><span class="line">#待出现Your Server Will Not Start后，按Ctrl+C终止进程</span><br><span class="line">sh dst_caves.sh</span><br><span class="line">#待出现Your Server Will Not Start后，按Ctrl+C终止进程</span><br><span class="line"> </span><br><span class="line">rm -rf ~/.klei/DoNotStarveTogether/Cluster_*</span><br><span class="line">#删除之前创建的默认文件</span><br></pre></td></tr></table></figure>
<p>在 <code>~/.klei/DoNotStarveTogether/</code> 中就生成了一个 <code>DediServer</code> 文件夹，该文件夹下有名为 <code>Master</code> 和 <code>Caves</code> 的两个子文件夹，这两个文件夹分别是地上和洞穴的配置目录。</p>
<p>此时，安装终了，进行配置后即可开始游戏。</p>
</li>
<li><p>怎么升级</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/steamcmd/steamcmd.sh +login anonymous +force_install_dir ~/dst +app_update 343050 validate +quit</span><br><span class="line">#注意这就是之前安装的命令，如果有修改路径的话，记得用实际路径哟</span><br></pre></td></tr></table></figure>
</li>
<li><p>PS : 第四步中其他可用的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">拷贝自 http://steamcommunity.com/sharedfiles/filedetails/?id=590681995</span><br><span class="line"> </span><br><span class="line">-persistent_storage_root</span><br><span class="line"> </span><br><span class="line">Change the directory that your configuration directory resides in. This should be an absolute path. The full path to your files will be &lt;persistent_storage_root&gt;/&lt;conf_dir&gt;/ where &lt;conf_dir&gt; is the value set by -conf_dir. The default for this option depends on the platform:</span><br><span class="line"> </span><br><span class="line">Windows: &lt;Your documents folder&gt;/Klei</span><br><span class="line">Mac OSX: &lt;Your home folder&gt;/Documents/Klei</span><br><span class="line">Linux: ~/.klei</span><br><span class="line"> </span><br><span class="line">-conf_dir</span><br><span class="line"> </span><br><span class="line">Change the name of your configuration directory. This name should not contain any slashes. The full path to your files will be &lt;persistent_storage_root&gt;/&lt;conf_dir&gt; where &lt;persistent_storage_root&gt; is the value set by the -persistent_storage_root option. The default is: &quot;DoNotStarveTogether&quot;.</span><br><span class="line"> </span><br><span class="line">-cluster</span><br><span class="line"> </span><br><span class="line">Set the name of the cluster directory that this server will use. The server will expect to find the cluster.ini file in the following location: &lt;persistent_storage_root&gt;/&lt;conf_dir&gt;/&lt;cluster&gt;/cluster.ini, where &lt;persistent_storage_root&gt; and &lt;conf_dir&gt; are the values set by the -persistent_storage_root and -conf_dir options. The default is &quot;Cluster_1&quot;.</span><br><span class="line"> </span><br><span class="line">-shard</span><br><span class="line"> </span><br><span class="line">Set the name of the shard directory that this server will use. The server will expect to find the server.ini file in the following location:&lt;persistent_storage_root&gt;/&lt;conf_dir&gt;/&lt;cluster&gt;/&lt;shard&gt;/server.ini, where &lt;persistent_storage_root&gt;, &lt;conf_dir&gt;, and &lt;cluster&gt; are the values set by the -persistent_storage_root, -conf_dir, and -cluster options. The default is &quot;Master&quot;.</span><br><span class="line"> </span><br><span class="line">-offline</span><br><span class="line"> </span><br><span class="line">Start the server in offline mode. In offline mode, the server will not be listed publicly, only players on the local network will be able to join, and any steam-related functionality will not work.</span><br><span class="line"> </span><br><span class="line">-console</span><br><span class="line"> </span><br><span class="line">Allow lua commands to be entered in the command prompt or terminal that the server is running in.</span><br><span class="line"> </span><br><span class="line">-bind_ip &lt;bind_ip&gt;</span><br><span class="line"> </span><br><span class="line">Change the address that the server binds to when listening for player connections. This is an advanced feature that most people will not need to use.</span><br><span class="line"> </span><br><span class="line">-port &lt;port_number&gt;</span><br><span class="line"> </span><br><span class="line">Valid values: 1..65535</span><br><span class="line">The UDP port that this server will listen for connections on. This option overrides the [NETWORK] / server_port setting in server.ini. If you are running a multi-level cluster, this port must be different for each server. This port must be between 10998 and 11018 inclusive in order for players on the same LAN to see it in their server listing. Ports below 1024 are restricted to privileged users on some operating systems.</span><br><span class="line"> </span><br><span class="line">-players &lt;max_players&gt;</span><br><span class="line"> </span><br><span class="line">Valid values: 1..64</span><br><span class="line">Set the maximum number of players that will be allowed to join the game. This option overrides the [GAMEPLAY] / max_players setting in cluster.ini.</span><br><span class="line"> </span><br><span class="line">-steam_master_server_port &lt;port_number&gt;</span><br><span class="line"> </span><br><span class="line">Valid values: 1..65535</span><br><span class="line">Internal port used by steam. This option overrides the [STEAM] / master_server_port setting in server.ini. Make sure that this is different for each server you run on the same machine.</span><br><span class="line"> </span><br><span class="line">-steam_authentication_port &lt;port_number&gt;</span><br><span class="line"> </span><br><span class="line">Valid values: 1..65535</span><br><span class="line">Internal port used by steam. This option overrides the [STEAM] / authentication_port setting in server.ini. Make sure that this is different for each server you run on the same machine.</span><br><span class="line"> </span><br><span class="line">-backup_logs</span><br><span class="line"> </span><br><span class="line">Create a backup of the previous log files each time the server is run. The backups will be stored in a directory called &quot;backup&quot; in the same directory as server.ini.</span><br><span class="line"> </span><br><span class="line">-tick &lt;tick_rate&gt;</span><br><span class="line"> </span><br><span class="line">Valid values: 15 .. 60</span><br><span class="line">This is the number of times per-second that the server sends updates to clients. Increasing this may improve precision, but will result in more network traffic. This option overrides the [NETWORK] / tick_rate setting in cluster.ini. It is recommended to leave this at the default value of 15. If you do change this option, it is recommended that you do so only for LAN games, and use a number evenly divisible into 60 (15, 20, 30).</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="配置文件树"><a href="#配置文件树" class="headerlink" title="配置文件树"></a>配置文件树</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/home/dst/.klei/DoNotStarveTogether\MyDediServer</span><br><span class="line">|</span><br><span class="line">|   adminlist.txt（/adminlist.txt）</span><br><span class="line">|   blocklist.txt（/blocklist.txt）</span><br><span class="line">|   cluster.ini（/cluster.ini）</span><br><span class="line">|   cluster_token.txt（/cluster_token.txt）</span><br><span class="line">|   whitelist.txt（/whitelist.txt）</span><br><span class="line">|</span><br><span class="line">|---Master</span><br><span class="line">|   |   modoverrides.lua（/Master/modoverrides.lua）</span><br><span class="line">|   |   server.ini（/Master/server.ini）</span><br><span class="line">|   |   worldgenoverride.lua（/Master/worldgenoverride.lua）</span><br><span class="line">|   |   其他文件</span><br><span class="line">|   |</span><br><span class="line">|   |---其他文件夹</span><br><span class="line">|</span><br><span class="line">|---Caves</span><br><span class="line">    |   modoverrides.lua（/Caves/modoverrides.lua）</span><br><span class="line">    |   server.ini（/Caves/server.ini）</span><br><span class="line">    |   worldgenoverride.lua（/Caves/worldgenoverride.lua）</span><br><span class="line">    |   其他文件</span><br><span class="line">    |</span><br><span class="line">    |---其他文件夹</span><br><span class="line"> </span><br><span class="line">/home/dst/dst/mods</span><br><span class="line">|</span><br><span class="line">|   dedicated_server_mods_setup.lua（/dedicated_server_mods_setup.lua）</span><br></pre></td></tr></table></figure>
<h4 id="token-文件（必须）"><a href="#token-文件（必须）" class="headerlink" title="token 文件（必须）"></a>token 文件（必须）</h4><p>打开游戏客户端，在游戏主界面，在左下角找到 <code>Account</code> 图标，点开。</p>
<p>会打开一个网页，在网页上找到<code>Games -&gt; Don&#39;t Starve Together -&gt; server</code>，进去token生成网页。</p>
<p>在输入框内随便输入什么，比如输入 <code>DST Dedi Server Token</code>，然后点击 <code>Generate Server Token</code> 按钮，即生成了一个不会失效的 token。可以在上方找到相应描述的 token。</p>
<p>将复制的 token 粘贴到 <strong>cluster_token.txt</strong> 文件中。</p>
<p>生成该 token 的用户将默认带有管理员权限。</p>
<h4 id="世界地图（必须）"><a href="#世界地图（必须）" class="headerlink" title="世界地图（必须）"></a>世界地图（必须）</h4><p><strong>地上部分，将文件保存为 worldgenoverride.lua，并放进 Master 文件夹中：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">return &#123;</span><br><span class="line">    override_enabled = true,</span><br><span class="line">    preset = &quot;SURVIVAL_TOGETHER&quot;,       -- &quot;SURVIVAL_TOGETHER&quot;, &quot;MOD_MISSING&quot;, &quot;SURVIVAL_TOGETHER_CLASSIC&quot;, &quot;SURVIVAL_DEFAULT_PLUS&quot;, &quot;COMPLETE_DARKNESS&quot;, &quot;DST_CAVE&quot;, &quot;DST_CAVE_PLUS&quot;</span><br><span class="line">    overrides = &#123;</span><br><span class="line">        -- default is &quot;never&quot;, &quot;rare&quot;, &quot;default&quot;, &quot;often&quot;, &quot;always&quot;</span><br><span class="line">  </span><br><span class="line">        -- MISC</span><br><span class="line">        task_set = &quot;default&quot;,           -- &quot;classic&quot;, &quot;default&quot;, &quot;cave_default&quot;</span><br><span class="line">        start_location = &quot;default&quot;,     -- &quot;caves&quot;, &quot;default&quot;, &quot;plus&quot;, &quot;darkness&quot;</span><br><span class="line">        world_size = &quot;default&quot;,         -- &quot;small&quot;, &quot;medium&quot;, &quot;default&quot;, &quot;huge&quot;</span><br><span class="line">        branching = &quot;default&quot;,          -- &quot;never&quot;, &quot;least&quot;, &quot;default&quot;, &quot;most&quot;</span><br><span class="line">        loop = &quot;default&quot;,               -- &quot;never&quot;, &quot;default&quot;, &quot;always&quot;</span><br><span class="line">        autumn = &quot;default&quot;,             -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        winter = &quot;default&quot;,             -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        spring = &quot;default&quot;,             -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        summer = &quot;default&quot;,             -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        season_start = &quot;default&quot;,       -- &quot;default&quot;, &quot;winter&quot;, &quot;spring&quot;, &quot;summer&quot;, &quot;autumnorspring&quot;, &quot;winterorsummer&quot;, &quot;random&quot;</span><br><span class="line">        day = &quot;default&quot;,                -- &quot;default&quot;, &quot;longday&quot;, &quot;longdusk&quot;, &quot;longnight&quot;, &quot;noday&quot;, &quot;nodusk&quot;, &quot;nonight&quot;, &quot;onlyday&quot;, &quot;onlydusk&quot;, &quot;onlynight&quot;</span><br><span class="line">        weather = &quot;default&quot;,</span><br><span class="line">        earthquakes = &quot;default&quot;,</span><br><span class="line">        lightning = &quot;default&quot;,</span><br><span class="line">        frograin = &quot;default&quot;,</span><br><span class="line">        wildfires = &quot;default&quot;,</span><br><span class="line">        touchstone = &quot;default&quot;,</span><br><span class="line">        regrowth = &quot;default&quot;,           -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot;</span><br><span class="line">        cavelight = &quot;default&quot;,          -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot;</span><br><span class="line">        boons = &quot;default&quot;,</span><br><span class="line">        prefabswaps_start = &quot;default&quot;,  -- &quot;classic&quot;, &quot;default&quot;, &quot;highly random&quot;</span><br><span class="line">        prefabswaps = &quot;default&quot;,        -- &quot;none&quot;, &quot;few&quot;, &quot;default&quot;, &quot;many&quot;, &quot;max&quot;</span><br><span class="line">  </span><br><span class="line">        -- RESOURCES</span><br><span class="line">        flowers = &quot;default&quot;,</span><br><span class="line">        grass = &quot;default&quot;,</span><br><span class="line">        sapling = &quot;default&quot;,</span><br><span class="line">        marshbush = &quot;default&quot;,</span><br><span class="line">        tumbleweed = &quot;default&quot;,</span><br><span class="line">        reeds = &quot;default&quot;,</span><br><span class="line">        trees = &quot;default&quot;,</span><br><span class="line">        flint = &quot;default&quot;,</span><br><span class="line">        rock = &quot;default&quot;,</span><br><span class="line">        rock_ice = &quot;default&quot;,</span><br><span class="line">        meteorspawner = &quot;default&quot;,</span><br><span class="line">        meteorshowers = &quot;default&quot;,</span><br><span class="line">        mushtree = &quot;default&quot;,</span><br><span class="line">        fern = &quot;default&quot;,</span><br><span class="line">        flower_cave = &quot;default&quot;,</span><br><span class="line">        wormlights = &quot;default&quot;,</span><br><span class="line">  </span><br><span class="line">        -- UNPREPARED</span><br><span class="line">        berrybush = &quot;default&quot;,</span><br><span class="line">        carrot = &quot;default&quot;,</span><br><span class="line">        mushroom = &quot;default&quot;,</span><br><span class="line">        cactus = &quot;default&quot;,</span><br><span class="line">        banana = &quot;default&quot;,</span><br><span class="line">        lichen = &quot;default&quot;,</span><br><span class="line">  </span><br><span class="line">        -- ANIMALS</span><br><span class="line">        rabbits = &quot;default&quot;,</span><br><span class="line">        moles = &quot;default&quot;,</span><br><span class="line">        butterfly = &quot;default&quot;,</span><br><span class="line">        birds = &quot;default&quot;,</span><br><span class="line">        buzzard = &quot;default&quot;,</span><br><span class="line">        catcoon = &quot;default&quot;,</span><br><span class="line">        perd = &quot;default&quot;,</span><br><span class="line">        pigs = &quot;default&quot;,</span><br><span class="line">        lightninggoat = &quot;default&quot;,</span><br><span class="line">        beefalo = &quot;default&quot;,</span><br><span class="line">        beefaloheat = &quot;default&quot;,</span><br><span class="line">        hunt = &quot;default&quot;,</span><br><span class="line">        alternatehunt = &quot;default&quot;,</span><br><span class="line">        penguins = &quot;default&quot;,</span><br><span class="line">        cave_ponds = &quot;default&quot;,</span><br><span class="line">        ponds = &quot;default&quot;,</span><br><span class="line">        bees = &quot;default&quot;,</span><br><span class="line">        angrybees = &quot;default&quot;,</span><br><span class="line">        tallbirds = &quot;default&quot;,</span><br><span class="line">        slurper = &quot;default&quot;,</span><br><span class="line">        bunnymen = &quot;default&quot;,</span><br><span class="line">        slurtles = &quot;default&quot;,</span><br><span class="line">        rocky = &quot;default&quot;,</span><br><span class="line">        monkey = &quot;default&quot;,</span><br><span class="line">  </span><br><span class="line">        -- MONSTERS</span><br><span class="line">        spiders = &quot;default&quot;,</span><br><span class="line">        cave_spiders = &quot;default&quot;,</span><br><span class="line">        hounds = &quot;default&quot;,</span><br><span class="line">        houndmound = &quot;default&quot;,</span><br><span class="line">        merm = &quot;default&quot;,</span><br><span class="line">        tentacles = &quot;default&quot;,</span><br><span class="line">        chess = &quot;default&quot;,</span><br><span class="line">        lureplants = &quot;default&quot;,</span><br><span class="line">        walrus = &quot;default&quot;,</span><br><span class="line">        liefs = &quot;default&quot;,</span><br><span class="line">        deciduousmonster = &quot;default&quot;,</span><br><span class="line">        krampus = &quot;default&quot;,</span><br><span class="line">        bearger = &quot;default&quot;,</span><br><span class="line">        deerclops = &quot;default&quot;,</span><br><span class="line">        goosemoose = &quot;default&quot;,</span><br><span class="line">        dragonfly = &quot;default&quot;,</span><br><span class="line">        bats = &quot;default&quot;,</span><br><span class="line">        fissure = &quot;default&quot;,</span><br><span class="line">        worms = &quot;default&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>洞穴部分，将文件保存为 worldgenoverride.lua，并放进 Caves 文件夹中：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">return &#123;</span><br><span class="line">    override_enabled = true,</span><br><span class="line">    preset = &quot;DST_CAVE&quot;,                 -- &quot;SURVIVAL_TOGETHER&quot;, &quot;MOD_MISSING&quot;, &quot;SURVIVAL_TOGETHER_CLASSIC&quot;, &quot;SURVIVAL_DEFAULT_PLUS&quot;, &quot;COMPLETE_DARKNESS&quot;, &quot;DST_CAVE&quot;, &quot;DST_CAVE_PLUS&quot;</span><br><span class="line">    overrides = &#123;</span><br><span class="line">        -- defalut is &quot;never&quot;, &quot;rare&quot;, &quot;default&quot;, &quot;often&quot;, &quot;always&quot;</span><br><span class="line">  </span><br><span class="line">        -- MISC</span><br><span class="line">        task_set = &quot;cave_default&quot;,       -- &quot;classic&quot;, &quot;default&quot;, &quot;cave_default&quot;</span><br><span class="line">        start_location = &quot;default&quot;,      -- &quot;caves&quot;, &quot;default&quot;, &quot;plus&quot;, &quot;darkness&quot;</span><br><span class="line">        world_size = &quot;default&quot;,          -- &quot;small&quot;, &quot;medium&quot;, &quot;default&quot;, &quot;huge&quot;</span><br><span class="line">        branching = &quot;default&quot;,           -- &quot;never&quot;, &quot;least&quot;, &quot;default&quot;, &quot;most&quot;</span><br><span class="line">        loop = &quot;default&quot;,                -- &quot;never&quot;, &quot;default&quot;, &quot;always&quot;</span><br><span class="line">        autumn = &quot;default&quot;,              -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        winter = &quot;default&quot;,              -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        spring = &quot;default&quot;,              -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        summer = &quot;default&quot;,              -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot;</span><br><span class="line">        season_start = &quot;default&quot;,        -- &quot;default&quot;, &quot;winter&quot;, &quot;spring&quot;, &quot;summer&quot;, &quot;autumnorspring&quot;, &quot;winterorsummer&quot;, &quot;random&quot;</span><br><span class="line">        day = &quot;default&quot;,                 -- &quot;default&quot;, &quot;longday&quot;, &quot;longdusk&quot;, &quot;longnight&quot;, &quot;noday&quot;, &quot;nodusk&quot;, &quot;nonight&quot;, &quot;onlyday&quot;, &quot;onlydusk&quot;, &quot;onlynight&quot;</span><br><span class="line">        weather = &quot;default&quot;,</span><br><span class="line">        earthquakes = &quot;default&quot;,</span><br><span class="line">        lightning = &quot;default&quot;,</span><br><span class="line">        frograin = &quot;default&quot;,</span><br><span class="line">        wildfires = &quot;default&quot;,</span><br><span class="line">        touchstone = &quot;default&quot;,</span><br><span class="line">        regrowth = &quot;default&quot;,            -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot;</span><br><span class="line">        cavelight = &quot;default&quot;,           -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot;</span><br><span class="line">        boons = &quot;default&quot;,</span><br><span class="line">        prefabswaps_start = &quot;default&quot;,   -- &quot;classic&quot;, &quot;default&quot;, &quot;highly random&quot;</span><br><span class="line">        prefabswaps = &quot;default&quot;,         -- &quot;none&quot;, &quot;few&quot;, &quot;default&quot;, &quot;many&quot;, &quot;max&quot;</span><br><span class="line">  </span><br><span class="line">        -- RESOURCES</span><br><span class="line">        flowers = &quot;default&quot;,</span><br><span class="line">        grass = &quot;default&quot;,</span><br><span class="line">        sapling = &quot;default&quot;,</span><br><span class="line">        marshbush = &quot;default&quot;,</span><br><span class="line">        tumbleweed = &quot;default&quot;,</span><br><span class="line">        reeds = &quot;default&quot;,</span><br><span class="line">        trees = &quot;default&quot;,</span><br><span class="line">        flint = &quot;default&quot;,</span><br><span class="line">        rock = &quot;default&quot;,</span><br><span class="line">        rock_ice = &quot;default&quot;,</span><br><span class="line">        meteorspawner = &quot;default&quot;,</span><br><span class="line">        meteorshowers = &quot;default&quot;,</span><br><span class="line">        mushtree = &quot;default&quot;,</span><br><span class="line">        fern = &quot;default&quot;,</span><br><span class="line">        flower_cave = &quot;default&quot;,</span><br><span class="line">        wormlights = &quot;default&quot;,</span><br><span class="line">  </span><br><span class="line">        -- UNPREPARED</span><br><span class="line">        berrybush = &quot;default&quot;,</span><br><span class="line">        carrot = &quot;default&quot;,</span><br><span class="line">        mushroom = &quot;default&quot;,</span><br><span class="line">        cactus = &quot;default&quot;,</span><br><span class="line">        banana = &quot;default&quot;,</span><br><span class="line">        lichen = &quot;default&quot;,</span><br><span class="line">  </span><br><span class="line">        -- ANIMALS</span><br><span class="line">        rabbits = &quot;default&quot;,</span><br><span class="line">        moles = &quot;default&quot;,</span><br><span class="line">        butterfly = &quot;default&quot;,</span><br><span class="line">        birds = &quot;default&quot;,</span><br><span class="line">        buzzard = &quot;default&quot;,</span><br><span class="line">        catcoon = &quot;default&quot;,</span><br><span class="line">        perd = &quot;default&quot;,</span><br><span class="line">        pigs = &quot;default&quot;,</span><br><span class="line">        lightninggoat = &quot;default&quot;,</span><br><span class="line">        beefalo = &quot;default&quot;,</span><br><span class="line">        beefaloheat = &quot;default&quot;,</span><br><span class="line">        hunt = &quot;default&quot;,</span><br><span class="line">        alternatehunt = &quot;default&quot;,</span><br><span class="line">        penguins = &quot;default&quot;,</span><br><span class="line">        cave_ponds = &quot;default&quot;,</span><br><span class="line">        ponds = &quot;default&quot;,</span><br><span class="line">        bees = &quot;default&quot;,</span><br><span class="line">        angrybees = &quot;default&quot;,</span><br><span class="line">        tallbirds = &quot;default&quot;,</span><br><span class="line">        slurper = &quot;default&quot;,</span><br><span class="line">        bunnymen = &quot;default&quot;,</span><br><span class="line">        slurtles = &quot;default&quot;,</span><br><span class="line">        rocky = &quot;default&quot;,</span><br><span class="line">        monkey = &quot;default&quot;,</span><br><span class="line">  </span><br><span class="line">        -- MONSTERS</span><br><span class="line">        spiders = &quot;default&quot;,</span><br><span class="line">        cave_spiders = &quot;default&quot;,</span><br><span class="line">        hounds = &quot;default&quot;,</span><br><span class="line">        houndmound = &quot;default&quot;,</span><br><span class="line">        merm = &quot;default&quot;,</span><br><span class="line">        tentacles = &quot;default&quot;,</span><br><span class="line">        chess = &quot;default&quot;,</span><br><span class="line">        lureplants = &quot;default&quot;,</span><br><span class="line">        walrus = &quot;default&quot;,</span><br><span class="line">        liefs = &quot;default&quot;,</span><br><span class="line">        deciduousmonster = &quot;default&quot;,</span><br><span class="line">        krampus = &quot;default&quot;,</span><br><span class="line">        bearger = &quot;default&quot;,</span><br><span class="line">        deerclops = &quot;default&quot;,</span><br><span class="line">        goosemoose = &quot;default&quot;,</span><br><span class="line">        dragonfly = &quot;default&quot;,</span><br><span class="line">        bats = &quot;default&quot;,</span><br><span class="line">        fissure = &quot;default&quot;,</span><br><span class="line">        worms = &quot;default&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="通用配置文件（必须）"><a href="#通用配置文件（必须）" class="headerlink" title="通用配置文件（必须）"></a>通用配置文件（必须）</h4><p>把这个文件保存为 <strong>cluster.ini</strong> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[MISC]</span><br><span class="line">max_snapshots = 6                  # 最大快照数，决定了可回滚的天数</span><br><span class="line">console_enabled = true             # 是否开启控制台</span><br><span class="line"> </span><br><span class="line">[SHARD]</span><br><span class="line">shard_enabled = true               # 服务器共享，要开启洞穴服务器的必须启用</span><br><span class="line">bind_ip = 127.0.0.1                # 服务器监听附属服务器的地址，会被 server .ini 覆盖，This only needs to be set for the master server, either in cluster.ini, or the master server&apos;s server.ini.</span><br><span class="line"></span><br><span class="line">master_ip = 127.0.0.1              # master 服务器的 IP，针对非 master 服务器，若与 master 服务器运行在同一台机器时，可填写 127.0.0.1，会被 server.ini 覆盖，</span><br><span class="line">master_port = 10888                # 监听 master 服务器的 UDP 端口，所有连接至 master 服务器的非 master 服务器必须相同</span><br><span class="line">cluster_key = dst                  # 连接密码，每台服务器必须相同，会被 server.ini 覆盖</span><br><span class="line"> </span><br><span class="line">[STEAM]</span><br><span class="line">steam_group_only = false           # 只允许某 Steam 组的成员加入</span><br><span class="line">steam_group_id = 0                 # 指定某个 Steam 组，填写组 ID</span><br><span class="line">steam_group_admins = false         # 开启后，Steam 组的管理员拥有服务器的管理权限</span><br><span class="line"> </span><br><span class="line">[NETWORK]</span><br><span class="line">offline_server = false             # 离线服务器，只有局域网用户能加入，并且所有依赖于 Steam 的任何功能都无效，比如说饰品掉落</span><br><span class="line">tick_rate = 15                     # 每秒通信次数，越高游戏体验越好，但是会加大服务器负担</span><br><span class="line">whitelist_slots = 0                # 为白名单用户保留的游戏位</span><br><span class="line">cluster_password =                 # 游戏密码，不设置表示无密码</span><br><span class="line">cluster_name = ttionya test        # 游戏房间名称</span><br><span class="line">cluster_description = description  # 游戏房间描述</span><br><span class="line">lan_only_cluster = false           # 局域网游戏</span><br><span class="line">cluster_intention = madness        # 游戏偏好，可选 cooperative, competitive, social, or madness，随便设置，没卵用</span><br><span class="line"> </span><br><span class="line">[GAMEPLAY]</span><br><span class="line">max_players = 16                   # 最大游戏人数</span><br><span class="line">pvp = true                         # 能不能攻击其他玩家，能不能给其他玩家喂屎</span><br><span class="line">game_mode = survival               # 游戏模式，可选 survival, endless or wilderness，与玩家死亡后的负面影响有关</span><br><span class="line">pause_when_empty = false           # 没人服务器暂停，刷天数必备</span><br><span class="line">vote_kick_enabled = false          # 投票踢人</span><br></pre></td></tr></table></figure>
<p>然后上干货：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[MISC]</span><br><span class="line">max_snapshots = 10</span><br><span class="line">console_enabled = true</span><br><span class="line">  </span><br><span class="line">[SHARD]</span><br><span class="line">shard_enabled = true</span><br><span class="line">bind_ip = 127.0.0.1</span><br><span class="line">master_ip = 127.0.0.1</span><br><span class="line">master_port = 11001</span><br><span class="line">cluster_key = dst</span><br><span class="line">  </span><br><span class="line">[STEAM]</span><br><span class="line">steam_group_only = false</span><br><span class="line">steam_group_id = 0</span><br><span class="line">steam_group_admins = false</span><br><span class="line">  </span><br><span class="line">[NETWORK]</span><br><span class="line">offline_server = false</span><br><span class="line">tick_rate = 15</span><br><span class="line">whitelist_slots = 2</span><br><span class="line">cluster_password = 123456</span><br><span class="line">cluster_name = TEST WORLD</span><br><span class="line">cluster_description = for test</span><br><span class="line">lan_only_cluster = false</span><br><span class="line">cluster_intention = cooperative</span><br><span class="line"></span><br><span class="line">[GAMEPLAY]</span><br><span class="line">max_players = 8</span><br><span class="line">pvp = false</span><br><span class="line">game_mode = survival</span><br><span class="line">pause_when_empty = true</span><br><span class="line">vote_kick_enabled = false</span><br></pre></td></tr></table></figure>
<h4 id="独立配置文件（必须）"><a href="#独立配置文件（必须）" class="headerlink" title="独立配置文件（必须）"></a>独立配置文件（必须）</h4><p>解释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[SHARD]</span><br><span class="line">is_master = true /false      # 是否是 master 服务器，只能存在一个 true，其他全是 false</span><br><span class="line">name = caves                 # 针对非 master 服务器的名称</span><br><span class="line">id = ???                     # 随机生成，不用加入该属性</span><br><span class="line"> </span><br><span class="line">[STEAM]</span><br><span class="line">authentication_port = 8766   # Steam 用的端口，确保每个实例都不相同</span><br><span class="line">master_server_port = 27016   # Steam 用的端口，确保每个实例都不相同</span><br><span class="line"> </span><br><span class="line">[NETWORK]</span><br><span class="line">server_port = 10999          # 监听的 UDP 端口，只能介于 10998 - 11018 之间，确保每个实例都不相同</span><br></pre></td></tr></table></figure>
<p><strong>地上部分，保存为 server.ini，并放到 Master 文件夹内：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[SHARD]</span><br><span class="line">is_master = true</span><br><span class="line"> </span><br><span class="line">[STEAM]</span><br><span class="line">authentication_port = 12345</span><br><span class="line">master_server_port = 12346</span><br><span class="line"> </span><br><span class="line">[NETWORK]</span><br><span class="line">server_port = 10999</span><br></pre></td></tr></table></figure>
<p><strong>洞穴部分，保存为 server.ini，放到 Caves 文件夹内：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[SHARD]</span><br><span class="line">is_master = false</span><br><span class="line">name = caves</span><br><span class="line"> </span><br><span class="line">[STEAM]</span><br><span class="line">authentication_port = 12347</span><br><span class="line">master_server_port = 12348</span><br><span class="line"> </span><br><span class="line">[NETWORK]</span><br><span class="line">server_port = 11000</span><br></pre></td></tr></table></figure>
<h4 id="下载-Mod-文件（建议）"><a href="#下载-Mod-文件（建议）" class="headerlink" title="下载 Mod 文件（建议）"></a>下载 Mod 文件（建议）</h4><p>饥荒通过一个名为 <strong>dedicated_server_mods_setup.lua</strong> 的文件确认需要下载哪些 Mod。</p>
<p>首先去创意工坊找些 Mod，并获得其 id，或者找些 Mod 合集，将 Mod id 按以下形式（换行复制粘贴）保存在文件中。以下是完整文件内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">--There are two functions that will install mods, ServerModSetup and ServerModCollectionSetup. Put the calls to the functions in this file and they will be executed on boot.</span><br><span class="line"></span><br><span class="line">--ServerModSetup takes a string of a specific mod&apos;s Workshop id. It will download and install the mod to your mod directory on boot.</span><br><span class="line">    --The Workshop id can be found at the end of the url to the mod&apos;s Workshop page.</span><br><span class="line">    --Example: http://steamcommunity.com/sharedfiles/filedetails/?id=350811795</span><br><span class="line">    --ServerModSetup(&quot;350811795&quot;)</span><br><span class="line"> </span><br><span class="line">--ServerModCollectionSetup takes a string of a specific mod&apos;s Workshop id. It will download all the mods in the collection and install them to the mod directory on boot.</span><br><span class="line">    --The Workshop id can be found at the end of the url to the collection&apos;s Workshop page.</span><br><span class="line">    --Example: http://steamcommunity.com/sharedfiles/filedetails/?id=379114180</span><br><span class="line">    --ServerModCollectionSetup(&quot;379114180&quot;)</span><br><span class="line"></span><br><span class="line">ServerModSetup(&quot;458940297&quot;)                                                            </span><br><span class="line">ServerModSetup(&quot;375859599&quot;)                                                              </span><br><span class="line">ServerModSetup(&quot;375850593&quot;)                                                            </span><br><span class="line">ServerModSetup(&quot;347079953&quot;)</span><br><span class="line">ServerModSetup(&quot;378160973&quot;)</span><br><span class="line"></span><br><span class="line">--ServerModCollectionSetup(&quot;id&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="配置-Mod-文件（建议）"><a href="#配置-Mod-文件（建议）" class="headerlink" title="配置 Mod 文件（建议）"></a>配置 Mod 文件（建议）</h4><p>之前的 <strong>dedicated_server_mods_setup.lua</strong> 文件是用于下载 Mod。</p>
<p>Mod 是否启用及配置则是 <strong>modoverrides.lua</strong> 文件的功能。</p>
<p><strong>并且分别往 Master 和 Caves 文件夹里复制一份。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">return &#123;                                                                                 </span><br><span class="line">[&quot;workshop-458940297&quot;] = &#123; enabled = false &#125;,--Food Values - Item Tooltips               </span><br><span class="line">[&quot;workshop-375859599&quot;] = &#123; enabled = true &#125;,--Health Info                                </span><br><span class="line">[&quot;workshop-375850593&quot;] = &#123; enabled = false &#125;,--Extra Equip Slots                         </span><br><span class="line">[&quot;workshop-556027744&quot;] = &#123; enabled = false &#125;,--??? big foot                              </span><br><span class="line">[&quot;workshop-378160973&quot;] = &#123; enabled = true &#125;,--Global Positions                           </span><br><span class="line">[&quot;workshop-347079953&quot;] = &#123; enabled = true &#125;--Display Food Values                         </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：最后不要加逗号</p>
<p><code>configuration_options</code> 里怎么配置的？自己查看 mod 文件夹里的 <code>modinfo.lua</code>，通过 <code>default</code>和 <code>options</code> 的值去猜怎么写。</p>
<h4 id="设定管理员（可选）"><a href="#设定管理员（可选）" class="headerlink" title="设定管理员（可选）"></a>设定管理员（可选）</h4><p>管理员可以使用远程指令，比如说回滚，强行保存，踢人等等。</p>
<p>首先，你要得到你想要设为管理员的玩家的<code>用户 id</code>。</p>
<p>有两种方法：</p>
<p>1、让该玩家加入游戏，再查看日志，你会在日志中找到 <code>KU_</code> 开头的一串<code>用户 id</code></p>
<p>2、让该玩家点击游戏主页面的 <code>Account</code> 按钮（和获得 token 一样），在页面中会有<code>用户 id</code></p>
<p>之后，<strong>把用户 id 一行放一个，保存在 adminlist.txt 文件中。</strong>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">KU_3N5kE2Zp</span><br><span class="line">KU_BJY3CxYT</span><br><span class="line">KU_DF1orNGA</span><br><span class="line">KU_FAd2Yr8m</span><br></pre></td></tr></table></figure>
<h4 id="黑名单（可选）"><a href="#黑名单（可选）" class="headerlink" title="黑名单（可选）"></a>黑名单（可选）</h4><p>踢了又进来，不想再让他进来？Ban 了他！</p>
<p><strong>从日志中找到他的 SteamID64，添加到 blocklist.txt 中，一行一个。</strong></p>
<h4 id="白名单（可选）"><a href="#白名单（可选）" class="headerlink" title="白名单（可选）"></a>白名单（可选）</h4><p>哇，服务器太火爆了，管理员都进不来了。</p>
<p>还记得 <code>cluster.ini</code> 里有一个 <code>whitelist_slots</code> 配置吗？这就是白名单席位。</p>
<p>白名单席位占用最大游戏人数，比如说，服务器一共开了 8 个位置，设置了 2 个白名单席位，此时，最多只能加入 6 个普通玩家。</p>
<p><strong>这个文件是 whitelist.txt，里面的内容是以 KU_ 开头的用户 id。</strong></p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">su - dst</span><br><span class="line">script /dev/null</span><br><span class="line">cd ~/dst/bin</span><br><span class="line">screen sh ./dst_overworld.sh</span><br><span class="line"># 手动同时按 Ctrl 和 A 键，之后按 C 键</span><br><span class="line">sh ./dst_caves.sh</span><br></pre></td></tr></table></figure>
<p>这样，即使关闭终端，也不会被结束进程了。顺便，为什么要使用 <code>script /dev/null</code> 命令呢，详细原因见<a href="http://blog.ttionya.com/article-1318.html" target="_blank" rel="noopener">《解决Screen出现Cannot open your terminal ‘/dev/pts/0’问题》</a></p>
<p>如何关闭游戏呢？建议到命令行中输入 <code>c_shutdown()</code> 关闭服务器！！！</p>
<p>经本人 skk 尝试，服务器任务 ctrl-c 就行。</p>
<h4 id="更多命令"><a href="#更多命令" class="headerlink" title="更多命令"></a>更多命令</h4><p>当你为服务器管理员时，在游戏中按 <code>~</code> 呼出控制台，再按 <code>Ctrl</code> 键即可转换为 <code>Remote</code> 模式，会出现 <code>“Remote”</code> 字样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">c_sethealth(percent)</span><br><span class="line">#设置血量，括号里填百分比，0.9=90%</span><br><span class="line">c_setsanity(percent)</span><br><span class="line">#设置san值，括号里填百分比，0.9=90%</span><br><span class="line">c_sethunger(percent)</span><br><span class="line">#设置饱食度，括号里填百分比，0.9=90%</span><br><span class="line">c_godmode()</span><br><span class="line">#上帝模式</span><br><span class="line">c_speedmult(multiplier)</span><br><span class="line">#设置移动速度，一般1.2足够</span><br><span class="line">c_reset()</span><br><span class="line">#在不保存世界的情况下重载，会导致掉线</span><br><span class="line">c_regenerateworld()</span><br><span class="line">#删除当前世界并生成新世界</span><br><span class="line">c_save()</span><br><span class="line">#手动保存</span><br><span class="line">c_shutdown(true | false)</span><br><span class="line">#c_shutdown(true)或c_shutdown()保存游戏并关闭服务器，c_shutdown(false)不保存游戏直接关闭服务器</span><br><span class="line">c_rollback(count)</span><br><span class="line">#回档，count从1开始计算，回到之前保存的状态</span><br></pre></td></tr></table></figure>
<p>更多命令见<a href="http://dont-starve-game.wikia.com/wiki/Console/Don%27t_Starve_Together_Commands" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>
  </article>
    
  </div>
</div>

    <footer class="main-footer">
  <div class="container">
    © 2018 
  </div>
</footer>
    



<script src="/./runtime.32f029.js"></script><script src="/./vendor.ec1199.js"></script><script src="/./app.5ed5af.js"></script>


  </body>
</html>
